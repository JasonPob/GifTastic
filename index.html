<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>GifTastic || Jason Poblador</title>
</head>

<body>
    <h1>Food GIF Generator!!</h1>
    <div id="GIFS"></div>

    <div id="buttonGenerator">
        <form action="/action_page.php">
            Search and add a type of food:<br>
            <input type="text" value="">
            <br>
            <input type="submit" value="Submit">
          </form> 
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">
        //Tasks
        //1. Dynamically create buttons
        //2. Link buttons to GIPHY API
        //3. Show 10 GIF's per button and display picture and rating

        //Adding click event listen listener to all buttons
        $("button").on("click", function () {
            //use data-search attr on click event
            var x = $(this).data("search");
            //make queryURL and pull 10 results using data-search
            var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + x + "&api_key=E2JXP2YQb0vQRJcPrNRHyq54ZXyEwH3K&limit=10";
            //AJAX call
            $.ajax({ url: queryURL, method: "GET" })
                .done(function (response) {
                    console.log(response);
                    for (var i = 0; i < response.data.length; i++) {
                        var foodDiv = $("<div>");
                        var p = $("<p>").text("Rating: " + response.data[i].rating);
                        var foodImage = $("<img>");
                        foodImage.attr("src", response.data[i].images.fixed_height.url);
                        foodDiv.append(p);
                        foodDiv.append(foodImage);
                        $("GIFS").append(foodDiv);
                    }
                })
                
        });




    </script>
</body>

</html>